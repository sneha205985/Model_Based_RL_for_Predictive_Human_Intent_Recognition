<!DOCTYPE html>
<html lang="{{ page.lang | default: site.lang | default: 'en' }}">

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    
    <!-- SEO Meta Tags -->
    <title>{% if page.title %}{{ page.title | escape }} | {{ site.title | escape }}{% else %}{{ site.title | escape }}{% endif %}</title>
    <meta name="description" content="{{ page.excerpt | default: site.description | strip_html | normalize_whitespace | truncate: 160 | escape }}">
    <meta name="author" content="{{ page.author | default: site.author.name | escape }}">
    
    <!-- Open Graph Meta Tags -->
    <meta property="og:type" content="website">
    <meta property="og:title" content="{% if page.title %}{{ page.title | escape }}{% else %}{{ site.title | escape }}{% endif %}">
    <meta property="og:description" content="{{ page.excerpt | default: site.description | strip_html | normalize_whitespace | truncate: 160 | escape }}">
    <meta property="og:url" content="{{ page.url | absolute_url }}">
    <meta property="og:site_name" content="{{ site.title | escape }}">
    
    <!-- Twitter Card Meta Tags -->
    <meta name="twitter:card" content="summary">
    <meta name="twitter:title" content="{% if page.title %}{{ page.title | escape }}{% else %}{{ site.title | escape }}{% endif %}">
    <meta name="twitter:description" content="{{ page.excerpt | default: site.description | strip_html | normalize_whitespace | truncate: 160 | escape }}">
    
    <!-- Canonical URL -->
    <link rel="canonical" href="{{ page.url | absolute_url }}">
    
    <!-- RSS Feed -->
    <link type="application/atom+xml" rel="alternate" href="{{ '/feed.xml' | absolute_url }}" title="{{ site.title | escape }}">
    
    <!-- Stylesheets -->
    <link rel="stylesheet" href="{{ '/assets/css/main.css' | relative_url }}">
    
    <!-- Favicon -->
    <link rel="icon" type="image/x-icon" href="{{ '/assets/favicon.ico' | relative_url }}">
    
    <!-- MathJax for Mathematical Notation -->
    {% if site.mathjax or page.mathjax %}
    <script type="text/javascript" async
        src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.7/MathJax.js?config=TeX-MML-AM_CHTML">
    </script>
    <script type="text/x-mathjax-config">
        MathJax.Hub.Config({
            tex2jax: {
                inlineMath: [['$', '$'], ['\\(', '\\)']],
                displayMath: [['$$', '$$'], ['\\[', '\\]']],
                processEscapes: true,
                processEnvironments: true
            },
            CommonHTML: { scale: 90 },
            "HTML-CSS": { scale: 90 }
        });
    </script>
    {% endif %}
    
    <!-- Syntax Highlighting -->
    <link rel="stylesheet" href="{{ '/assets/css/syntax.css' | relative_url }}">
    
    <!-- Print Styles -->
    <link rel="stylesheet" href="{{ '/assets/css/print.css' | relative_url }}" media="print">
    
    <!-- Google Analytics -->
    {% if site.google_analytics %}
    <script async src="https://www.googletagmanager.com/gtag/js?id={{ site.google_analytics }}"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());
        gtag('config', '{{ site.google_analytics }}');
    </script>
    {% endif %}
</head>

<body class="{% if page.class %}{{ page.class }}{% endif %}">
    
    <!-- Skip to content link for accessibility -->
    <a class="skip-link sr-only" href="#main-content">Skip to main content</a>
    
    <!-- Header -->
    <header class="site-header" role="banner">
        <div class="container">
            <nav class="site-nav" role="navigation" aria-label="Main navigation">
                <div class="nav-brand">
                    <a class="site-title" href="{{ '/' | relative_url }}">{{ site.title }}</a>
                    {% if site.subtitle %}<p class="site-subtitle">{{ site.subtitle }}</p>{% endif %}
                </div>
                
                <!-- Mobile menu toggle -->
                <button class="nav-toggle" aria-label="Toggle navigation" aria-expanded="false">
                    <span class="nav-toggle-bar"></span>
                    <span class="nav-toggle-bar"></span>
                    <span class="nav-toggle-bar"></span>
                </button>
                
                <!-- Navigation menu -->
                <div class="nav-menu" role="menubar">
                    {% for nav_item in site.nav %}
                    <a class="nav-link {% if page.url == nav_item.url %}active{% endif %}" 
                       href="{{ nav_item.url | relative_url }}" 
                       role="menuitem">{{ nav_item.title }}</a>
                    {% endfor %}
                </div>
            </nav>
        </div>
    </header>
    
    <!-- Main Content -->
    <main id="main-content" class="site-main" role="main">
        <div class="container">
            {% if page.title and page.url != '/' %}
            <header class="page-header">
                <h1 class="page-title">{{ page.title }}</h1>
                {% if page.subtitle %}<p class="page-subtitle">{{ page.subtitle }}</p>{% endif %}
                {% if page.date %}
                <p class="page-date">
                    <time datetime="{{ page.date | date_to_xmlschema }}">{{ page.date | date: site.date_format }}</time>
                </p>
                {% endif %}
            </header>
            {% endif %}
            
            <!-- Breadcrumb Navigation -->
            {% unless page.url == '/' %}
            <nav class="breadcrumb" aria-label="Breadcrumb">
                <ol class="breadcrumb-list">
                    <li class="breadcrumb-item"><a href="{{ '/' | relative_url }}">Home</a></li>
                    {% if page.url != '/' %}
                    <li class="breadcrumb-item active" aria-current="page">{{ page.title }}</li>
                    {% endif %}
                </ol>
            </nav>
            {% endunless %}
            
            <!-- Page Content -->
            <div class="page-content">
                {{ content }}
            </div>
            
            <!-- Table of Contents for long pages -->
            {% if page.toc %}
            <aside class="table-of-contents" role="complementary">
                <h2>Table of Contents</h2>
                <div id="toc"></div>
            </aside>
            {% endif %}
        </div>
    </main>
    
    <!-- Footer -->
    <footer class="site-footer" role="contentinfo">
        <div class="container">
            <div class="footer-content">
                <div class="footer-section">
                    <h3>{{ site.title }}</h3>
                    <p>{{ site.description | truncate: 120 }}</p>
                </div>
                
                <div class="footer-section">
                    <h3>Navigation</h3>
                    <ul class="footer-nav">
                        {% for nav_item in site.nav %}
                        <li><a href="{{ nav_item.url | relative_url }}">{{ nav_item.title }}</a></li>
                        {% endfor %}
                    </ul>
                </div>
                
                <div class="footer-section">
                    <h3>Connect</h3>
                    <ul class="social-links">
                        {% if site.github_username %}
                        <li><a href="https://github.com/{{ site.github_username }}" 
                               aria-label="GitHub Profile" target="_blank" rel="noopener">GitHub</a></li>
                        {% endif %}
                        {% if site.twitter_username %}
                        <li><a href="https://twitter.com/{{ site.twitter_username }}" 
                               aria-label="Twitter Profile" target="_blank" rel="noopener">Twitter</a></li>
                        {% endif %}
                    </ul>
                </div>
            </div>
            
            <div class="footer-bottom">
                <p>&copy; {{ site.time | date: '%Y' }} {{ site.author.name }}. All rights reserved.</p>
                <p>Built with <a href="https://jekyllrb.com/" target="_blank" rel="noopener">Jekyll</a> 
                   and hosted on <a href="https://pages.github.com/" target="_blank" rel="noopener">GitHub Pages</a>.</p>
            </div>
        </div>
    </footer>
    
    <!-- JavaScript -->
    <script src="{{ '/assets/js/main.js' | relative_url }}"></script>
    
    <!-- Table of Contents Generator -->
    {% if page.toc %}
    <script src="{{ '/assets/js/toc.js' | relative_url }}"></script>
    {% endif %}
    
</body>
</html>